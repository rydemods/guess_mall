!function(o){"use strict";o.fn.zoomImage=function(e){return this.each(function(){function i(){"object"==typeof e&&(g=o.extend(g,e)),""==g.zoomUrl&&(g.zoomUrl=p.attr("src")),null==g.bigWidth&&(g.bigWidth=p.width()),null==g.bigHeight&&(g.bigHeight=p.height()),null==g.bigPosX&&(g.bigPosX=p.width()+10),null==g.bigPosY&&(g.bigPosY=0),c=g.ratio<1?2:g.ratio,p.wrap('<div class="_zoomwrap" style="position:relative;display:inline-block"><div class="_zoomImgbox" style="position:relative"></div></div>'),t=p.closest("._zoomwrap"),s=p.parent(),l=o('<div class="_zoomBigbox" style="z-index:10"><img src='+g.zoomUrl+' alt="" /></div>').css({position:"absolute",width:0,height:0,background:"#ffffff",outline:g.bigBorderWidth+"px solid "+g.bigBorderColor,left:p.width()/2,top:p.height()/2,overflow:"hidden",opacity:0}).hide().insertAfter(p),r=l.children("img").css({position:"absolute"}),a=o('<div class="_zoomControlbox"></div>').css({position:"absolute",width:"100%",height:"100%",left:0,top:0,opacity:0,cursor:"crosshair"}).insertAfter(s),h=o('<div class="_zoomCover"></div>').css({height:"100%",background:g.coverColor,opacity:g.coverOpacity}).appendTo(a),d=o('<div class="_zoomMask" style="z-index:10"></div>').css({position:"absolute",outline:g.maskBorderWidth+"px solid "+g.maskBorderColor,overflow:"hidden"}).hide().appendTo(a),n=p.clone().removeAttr("class").css({position:"absolute"}).appendTo(d),a.on("mouseenter mouseleave mousemove mousewheel DOMMouseScroll",function(e){switch(e.type){case"mouseenter":o(this).css({opacity:1}),d.show(),l.stop().show().animate({width:g.bigWidth,height:g.bigHeight,left:g.bigPosX,top:g.bigPosY,opacity:1},"fast");break;case"mouseleave":o(this).css({opacity:0}),d.hide(),l.stop().animate({width:0,height:0,left:p.width()/2,top:p.height()/2,opacity:0},"fast").hide(0);break;case"mousewheel":case"DOMMouseScroll":e.preventDefault();var i="mousewheel"==e.type?e.originalEvent.wheelDelta:-e.originalEvent.detail;c=i>0?c<g.ratioMax?c+g.ratioGap:g.ratioMax:c>u?c-g.ratioGap:u;case"mousemove":var t=p.width()/c,s=p.height()/c,a=e.pageX-p.offset().left-t/2,h=e.pageY-p.offset().top-s/2;0>a?a=0:a>p.width()-t&&(a=p.width()-t),0>h?h=0:h>p.height()-s&&(h=p.height()-s),d.css({width:t,height:s,left:a,top:h}),n.css({left:-a,top:-h}),r.css({width:p.width()*c,height:p.height()*c,left:n.position().left*c,top:n.position().top*c})}})}var t,s,l,r,a,h,d,n,c,p=o(this),g={zoomUrl:"",bigWidth:null,bigHeight:null,bigPosX:null,bigPosY:null,bigBorderColor:"#000000",bigBorderWidth:1,coverColor:"#ffffff",coverOpacity:.5,maskBorderColor:"#000000",maskBorderWidth:5,ratioMax:5,ratioGap:.5,ratio:2},u=1;p.closest("._zoomwrap").length>0||(0==p.width()?p.on("load",i):i(),p.on({destroy:function(){a.off("mouseenter mouseleave mousemove mousewheel DOMMouseScroll"),p.off("destroy"),t.before(p).remove()}}))})}}(jQuery);