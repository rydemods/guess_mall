(function($){jQuery.fn.mixture_opt_search=function(options){var default_opts={opt_code:'',depth:1};var opts=jQuery.extend(default_opts,options);var searchArr=[];var opt_obj=[];if(opts.opt_code==''||opts.depth<=0){return opt_obj;}this.each(function(){var $originalElement=jQuery(this);var code=$originalElement[0].code;if(code.indexOf(opts.opt_code)!=-1){opt_obj.push($originalElement[0]);}});if(opt_obj.length>0){$.each(opt_obj,function(i,v){var split_code=v.code.split(String.fromCharCode(30));var code_length=split_code.length;var depth=opts.depth;var temp_code=[];for(var j=0;j<depth;j++){temp_code.push(split_code[j]);}if(code_length>=depth&&depth>0){if($.inArray(split_code[depth-1],searchArr)==-1){var code=v.code;var price=v.price;var qty=v.qty;var change_obj={};if(depth==code_length){change_obj={code:temp_code.join(chr(30)),code_name:split_code[depth-1],price:price,qty:qty};}else{change_obj={code:temp_code.join(chr(30)),code_name:split_code[depth-1],price:0,qty:0}}$.extend($(this)[0],change_obj);searchArr.push(split_code[depth-1]);}else{delete opt_obj[i];}}else{delete opt_obj[i];}});}return opt_obj;};})(jQuery);function KakaoInit(setData){var snsData={label:encodeURIComponent($('#link-label').val()),imageTitle:encodeURIComponent($('#link-title').val()),imageUrl:$('#link-image').val(),imageWidth:$('#link-image').data('width'),imageHeight:$('#link-image').data('height'),linkUrl:encodeURIComponent($('#link-url').val())};var kakaoKey='914d0b932f83f00a9693fefb9155ff76';var target='#kakao-link';if(setData){if(setData.snsData){snsData=$.extend(snsData,setData.snsData);}if(snsData.key){kakaoKey=setData.key;}if(snsData.target){target=setData.target;}}Kakao.init(kakaoKey);Kakao.Link.createTalkLinkButton({container:target,label:snsData.label,image:{src:snsData.imageUrl,width:snsData.imageWidth,height:snsData.imageHeight},webButton:{text:snsData.imageTitle,url:snsData.linkUrl}});}function snsLinkPop(setData){var elementTarget=$(this);var imgPath=$('#link-img-path').val();var eventButton={facebook:'facebook-link',twitter:'twitter-link',band:'band-link'};var snsData={label:encodeURIComponent($('#link-label').val()),imageTitle:encodeURIComponent($('#link-title').val()),imageUrl:imgPath+$('#link-image').val(),imageWidth:$('#link-image').data('width'),imageHeight:$('#link-image').data('height'),linkUrl:encodeURIComponent($('#link-url').val()),linkCode:$('#link-code').val(),linkMenu:$('#link-menu').val()};var urlPop='';if(setData){if(setData.eventButton){eventButton=$.extend(eventButton,setData.eventButton);}if(setData.snsData){snsData=$.extend(snsData,setData.snsData);}}$.each(eventButton,function(i,v){if($(elementTarget).attr('id')==v){if(i==='facebook'){urlPop="http://www.facebook.com/sharer.php?u="+snsData.linkUrl;if($("#link-memid").val()!=""){$.ajax({type:"POST",url:"sns_point_insert_proc.php",data:{snstype:i,code:snsData.linkCode,menu:snsData.linkMenu}}).done(function(result){console.log(result);});}}else if(i==='twitter'){var url='https://twitter.com/intent/tweet?url='+$('#link-url').val()+'&text='+$('#link-title').val();$("#twitter-link").attr('href',url);twttr.events.bind('tweet',function(ev){if($("#link-memid").val()!=""){$.ajax({type:"POST",url:"sns_point_insert_proc.php",data:{snstype:i,code:snsData.linkCode,menu:snsData.linkMenu},async:false}).done(function(result){});}});}else if(i==='band'){urlPop='http://band.us/plugin/share?body='+snsData.imageTitle+'&route='+snsData.linkUrl;if($("#link-memid").val()!=""){$.ajax({type:"POST",url:"sns_point_insert_proc.php",data:{snstype:i,code:snsData.linkCode,menu:snsData.linkMenu}}).done(function(result){});}}}});if(urlPop){var windowPop=window.open(urlPop,'snsPop',"width=500, height=500");windowPop.focus();}}function kakaoStory(){var snsData={imageTitle:$('#link-title').val(),linkUrl:$('#link-url').val(),linkCode:$('#link-code').val(),linkMenu:$('#link-menu').val()};var target='#kakaostory-link';Kakao.Story.share({url:snsData.linkUrl,text:snsData.imageTitle,});if($("#link-memid").val()!=""){$.ajax({type:"POST",url:"sns_point_insert_proc.php",data:{snstype:"kakaostory",code:snsData.linkCode,menu:snsData.linkMenu}}).done(function(result){});}}function ClipCopy(url){var IE=(document.all)?true:false;if(IE){if(confirm("현제 페이지의 클립보드에 복사하시겠습니까?"))window.clipboardData.setData("Text",url);}else{temp=prompt("현제 페이지의 주소입니다. Ctrl+C를 눌러 클립보드로 복사하세요",url);}}function saveLike(productCode,likeType,section,section2,memId,menu){$.ajax({type:"POST",url:"product_like_proc.php",data:"code="+productCode+"&liketype="+likeType+"&section="+section+"&page="+menu+"&section2="+section2,dataType:"HTML"}).done(function(html){if(menu=="mypage"){$(".mypage-community-content").html(html);}else if(menu=="mypage_like"){$(".comp-posting").html(html);}});}function detailSaveLike(productCode,likeType,section,memId,brand){if(memId!=""){$.blockUI();setTimeout($.unblockUI,300);var param="code="+productCode+"&liketype="+likeType+"&section="+section+"&brand="+brand;$.ajax({type:"POST",url:"../front/product_like_proc.php",data:param,dataType:"JSON"}).done(function(data){if(section=="instagram"){var sec="i";}else if(section=="product"){var sec="p";}else if(section=="storestory"){var sec="s";}else if(section=="magazine"){var sec="m";}else if(section=="lookbook"){var sec="l";}else if(section=="forum_list_mypage"){var sec="f";}if(data[0]['section']=="instagram"){$(".like_i"+productCode).addClass("on");$(".like_i"+productCode).removeAttr("onclick");$(".like_i"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"on\",\"instagram\",\""+memId+"\",\""+brand+"\")");}else if(data[0]['section']=="product"){$(".like-check-"+productCode).removeAttr("onclick");$(".like-check-"+productCode).attr("onclick","detailSaveLike('"+productCode+"','on','product','"+memId+"','"+brand+"')");$('.like-cnt-txt').html('('+data[0]['hott_cnt']+')');}else if(data[0]['section']=="storestory"){$(".like_s"+productCode).addClass("on");$(".like_s"+productCode).removeAttr("onclick");$(".like_s"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"on\",\"storestory\",\""+memId+"\",\""+brand+"\")");}else if(data[0]['section']=="magazine"){$(".like_m"+productCode).addClass("on");$(".like_m"+productCode).removeAttr("onclick");$(".like_m"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"on\",\"magazine\",\""+memId+"\",\""+brand+"\")");}else if(data[0]['section']=="lookbook"){$(".like_l"+productCode).addClass("on");$(".like_l"+productCode).removeAttr("onclick");$(".like_l"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"on\",\"lookbook\",\""+memId+"\",\""+brand+"\")");}else if(data[0]['section']=="forum_list"){$(".like_f"+productCode).addClass("on");$(".like_f"+productCode).removeAttr("onclick");$(".like_f"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"on\",\"forum_list_mypage\",\""+memId+"\",\""+brand+"\")");}else{if(section=="instagram"){$(".like_i"+productCode).removeClass("on");$(".like_i"+productCode).removeAttr("onclick");$(".like_i"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"off\",\"instagram\",\""+memId+"\",\""+brand+"\")");}else if(section=="product"){$(".like-check-"+productCode).removeAttr("onclick");$(".like-check-"+productCode).attr("onclick","detailSaveLike('"+productCode+"','off','product','"+memId+"','"+brand+"')");$('.like-cnt-txt').html('('+data[0]['hott_cnt']+')');}else if(section=="storestory"){$(".like_s"+productCode).removeClass("on");$(".like_s"+productCode).removeAttr("onclick");$(".like_s"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"off\",\"storestory\",\""+memId+"\",\""+brand+"\")");}else if(section=="magazine"){$(".like_m"+productCode).removeClass("on");$(".like_m"+productCode).removeAttr("onclick");$(".like_m"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"off\",\"magazine\",\""+memId+"\",\""+brand+"\")");}else if(section=="lookbook"){$(".like_l"+productCode).removeClass("on");$(".like_l"+productCode).removeAttr("onclick");$(".like_l"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"off\",\"lookbook\",\""+memId+"\",\""+brand+"\")");}else if(section=="forum_list_mypage"){$(".like_f"+productCode).removeClass("on");$(".like_f"+productCode).removeAttr("onclick");$(".like_f"+productCode).attr("onclick","detailSaveLike(\""+productCode+"\",\"off\",\"forum_list_mypage\",\""+memId+"\",\""+brand+"\")");}}});}else{var url="../front/login.php?chUrl=/";$(location).attr('href',url);}}function getUrlParams(){var params={};window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(str,key,value){params[key]=value;});return params;}function select_feeling(num,section,feeling_type,memId){if(memId!=""){var param={"num":num,"section":section,"feeling_type":feeling_type}
$.ajax({type:"POST",url:"../front/ajax_good_feeling.php",data:param,dataType:"JSON"}).done(function(data){if(data[0]['no']==0){alert("이미 선택하셨습니다.");}else{if(data[0]['feeling_type']=="good"){if(data[0]['point_type']=="plus"){alert("호감을 선택하였습니다.");}else{alert("호감 선택을 해제 하였습니다.");}}else{if(data[0]['point_type']=="plus"){alert("비호감을 선택하였습니다.");}else{alert("비호감 선택을 해제 하였습니다.");}}$("#feeling_"+feeling_type+"_"+section+"_"+num).text(data[0]['feeling_cnt']);}});}else{var url="../front/login.php?chUrl=/";$(location).attr('href',url);}}function strip_tags(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,'').replace(tags,function($0,$1){return allowed.indexOf('<'+$1.toLowerCase()+'>')>-1?$0:'';});}function reset(){$(".detail-like").remove("");$(".related-list").empty("");$("#instagram_img").attr("src","");}function average(array){var sum=0;for(var i=0;i<array.length;i++)sum+=parseInt(array[i],10);return sum/array.length;}function detail_lookbook(no){accessPlus(no,"tbllookbook","access","no");var url="../front/lookbook_view.php?no="+no
$(location).attr('href',url);}function detail_magazine(no){accessPlus(no,"tblmagazine","access","no");var url="../front/magazine_detail.php?no="+no
$(location).attr('href',url);}function detail_forum(index){var url="../front/forum_view.php?index="+index
$(location).attr('href',url);}$.ajaxSetup({timeout:5000});function accessPlus(idx,table,column,seq_column){$.ajax({type:"POST",url:"access_plus_proc.php",data:{idx:idx,table:table,column:column,seq_column:seq_column}}).done(function(result){});}function captureReturnKey(e){if(e.keyCode==13&&e.srcElement.type!='textarea')return false;}function proSearchChk(){if($("#search").val().trim()===""){alert("검색어를 입력해주세요.");$("#search").val("").focus();return;}document.form.submit();}function enterSearch(e){var search=$("#search").val();if(e.keyCode==13){if(search==""){alert("검색어를 입력해주세요");$("#search").focus();return;}else{var url="../front/productsearch.php?search="+search
$(location).attr('href',url);}}}